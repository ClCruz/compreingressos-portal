<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="ContratoClienteEditDlg" widgetVar="ContratoClienteEditDialog" modal="true" resizable="false" appendTo="@(body)" header="#{bundle.EditContratoClienteTitle}">
            <h:form id="ContratoClienteEditForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="4" rendered="#{contratoClienteController.selected != null}">
                        <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idEmpresa}" for="idEmpresa" />
                        <p:selectOneMenu id="idEmpresa" value="#{contratoClienteController.selected.idEmpresa}" style="width:200px!important">
                            <f:selectItems value="#{empresaController.itemsAvailableSelectOne}"
                                           var="idEmpresaItem"
                                           itemValue="#{idEmpresaItem}"
                                           itemLabel="#{idEmpresaItem.dsEmpresa}"/>
                        </p:selectOneMenu>
                        <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dsResumida}" for="dsResumida" />
                        <p:inputText id="dsResumida" value="#{contratoClienteController.selected.dsResumida}" title="#{bundle.CreateContratoClienteTitle_dsResumida}" style="width:415px!important;" />
                    </p:panelGrid>
                    <p:panelGrid columns="4" rendered="#{contratoClienteController.selected != null}">
                        <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idLocalEvento}" for="idLocalEvento" />
                        <p:selectOneMenu id="idLocalEvento" value="#{contratoClienteController.selected.idLocalEvento}" style="width:346px!important">
                            <f:selectItems value="#{localEventoController.itemsAvailableSelectOne}"
                                           var="idLocalEventoItem"
                                           itemValue="#{idLocalEventoItem}"
                                           itemLabel="#{idLocalEventoItem.dsLocalEvento}"/>
                        </p:selectOneMenu>
                        <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idContratante}" for="idContratante" />
                        <p:selectOneMenu id="idContratante" value="#{contratoClienteController.selected.idContratante}" style="width:228px!important">
                            <f:selectItems value="#{contratanteController.itemsAvailableSelectOne}"
                                           var="idContratanteItem"
                                           itemValue="#{idContratanteItem}"
                                           itemLabel="#{idContratanteItem.nmRazaoSocial}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <p:tabView>
                        <p:tab title="Dados do Contrato">
                            <p:panelGrid columns="4" rendered="#{contratoClienteController.selected != null}">
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dsHorarioBilheteria}" for="dsHorarioBilheteria" />
                                <p:inputText id="dsHorarioBilheteria" title="#{bundle.CreateContratoClienteTitle_dsHorarioBilheteria}" />
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dsHorarioCallcenter}" for="dsHorarioCallcenter" />
                                <p:inputText id="dsHorarioCallcenter" title="#{bundle.CreateContratoClienteTitle_dsHorarioCallcenter}"/>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dtInicioVigencia}" for="dtInicioVigencia" />
                                <p:calendar id="dtInicioVigencia" pattern="MM/dd/yyyy" mindate="#{contratoClienteController.mostraData()}" locale="pt" value="#{contratoClienteController.selected.dtInicioVigencia}" title="#{bundle.EditContratoClienteTitle_dtInicioVigencia}"  showOn="button"/>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_cdSiglaProjeto}" for="cdSiglaProjeto" />
                                <p:inputText id="cdSiglaProjeto" value="#{contratoClienteController.selected.cdSiglaProjeto}" title="#{bundle.CreateContratoClienteTitle_cdSiglaProjeto}" />
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dtTerminoVigencia}" for="dtTerminoVigencia" />
                                <p:calendar id="dtTerminoVigencia" pattern="MM/dd/yyyy" mindate="#{contratoClienteController.mostraData()}" locale="pt" value="#{contratoClienteController.selected.dtTerminoVigencia}" title="#{bundle.EditContratoClienteTitle_dtTerminoVigencia}"  showOn="button"/>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_dsObsVendedor}" for="dsObsVendedor" />
                                <p:inputText id="dsObsVendedor" value="#{contratoClienteController.selected.dsObsVendedor}" title="#{bundle.CreateContratoClienteTitle_dsObsVendedor}" />
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idModalidadeContrato}" for="idModalidadeContrato" />
                                <p:selectOneMenu id="idModalidadeContrato" value="#{contratoClienteController.selected.idModalidadeContrato}" >
                                    <f:selectItems value="#{modalidadeContratoController.itemsAvailableSelectOne}"
                                                   var="idModalidadeContratoItem"
                                                   itemValue="#{idModalidadeContratoItem}"
                                                   itemLabel="#{idModalidadeContratoItem.dsModalidadeContrato}"/>
                                </p:selectOneMenu>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idSegmentoEvento}" for="idSegmentoEvento" />
                                <p:selectOneMenu id="idSegmentoEvento" value="#{contratoClienteController.selected.idSegmentoEvento}" >
                                    <f:selectItems value="#{segmentoEventoController.itemsAvailableSelectOne}"
                                                   var="idSegmentoEventoItem"
                                                   itemValue="#{idSegmentoEventoItem}"
                                                   itemLabel="#{idSegmentoEventoItem.dsSegmentoEvento}"/>
                                </p:selectOneMenu>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idTipoContrato}" for="idTipoContrato" />
                                <p:selectOneMenu id="idTipoContrato" value="#{contratoClienteController.selected.idTipoContrato}" >
                                    <f:selectItems value="#{tipoContratoController.itemsAvailableSelectOne}"
                                                   var="idTipoContratoItem"
                                                   itemValue="#{idTipoContratoItem}"
                                                   itemLabel="#{idTipoContratoItem.dsTipoContrato}"/>
                                </p:selectOneMenu>
                                <p:outputLabel value="#{bundle.CreateContratoClienteLabel_idVendedor}" for="idVendedor" />
                                <p:selectOneMenu id="idVendedor" value="#{contratoClienteController.selected.idVendedor}" >
                                    <f:selectItems value="#{vendedorController.itemsAvailableSelectOne}"
                                                   var="idVendedorItem"
                                                   itemValue="#{idVendedorItem}"
                                                   itemLabel="#{idVendedorItem.dsVendedor}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:tab>
                        <p:tab title="Informações para repasse">
                            <p:dataTable id="listaCCPP" style="width:960px!important;" value="#{contratoClienteController.itemsEditPP}" var="itemsCCPP" rendered="#{contratoClienteController.selected != null}">
                                <p:column headerText="#{bundle.ListContratoClientePrazoPagamentoTitle_idFormaPagamento}">
                                    <h:outputText value="#{itemsCCPP.idFormaPagamento.dsFormaPagamento}" />
                                </p:column>
                                <p:column headerText="#{bundle.ListContratoClientePrazoPagamentoTitle_idPrazoPagamento}">
                                    <h:outputText value="#{itemsCCPP.idPrazoPagamento.dsPrazoPagamento}" />
                                </p:column>
                            </p:dataTable><br />
                            <p:panelGrid columns="4" >
                                <p:outputLabel value="#{bundle.ListContratoClientePrazoPagamentoTitle_idFormaPagamento}" for="idFormaPagamento" />
                                <p:selectOneMenu id="idFormaPagamento" value="#{contratoClienteController.selectedPP.idFormaPagamento}" style="width:235px!important">
                                    <f:selectItem itemLabel="Selecione..." />
                                    <f:selectItems value="#{formaPagamentoController.itemsAvailableSelectOne}"
                                                   var="idFormaPagamentoItem"
                                                   itemLabel="#{idFormaPagamentoItem.dsFormaPagamento}"
                                                   itemValue="#{idFormaPagamentoItem}"/>
                                </p:selectOneMenu>
                                <p:outputLabel value="#{bundle.ListContratoClientePrazoPagamentoTitle_idPrazoPagamento}" for="idPrazoPagamento" />
                                <p:selectOneMenu id="idPrazoPagamento" value="#{contratoClienteController.selectedPP.idPrazoPagamento}" style="width:235px!important">
                                    <f:selectItem itemLabel="Selecione..." />
                                    <f:selectItems value="#{prazoPagamentoController.itemsAvailableSelectOne}"
                                                   var="idPrazoPagamentoItem"
                                                   itemLabel="#{idPrazoPagamentoItem.dsPrazoPagamento}"
                                                   itemValue="#{idPrazoPagamentoItem}"/>
                                </p:selectOneMenu>
                                <p:commandButton icon="fa fa-check" value="Adicionar" actionListener="#{contratoClienteController.addEditPP()}" update="listaCCPP"/>
                            </p:panelGrid>
                        </p:tab>
                        <p:tab title="Regras">
                            <p:dataTable id="listCCTL" style="width:960px;" emptyMessage="Cadastre os tipos de lançamento abaixo"
                                         value="#{contratoClienteController.itemsEditTL}" var="itemCCTL">
                                <p:column headerText="#{bundle.CreateContratoClienteTipoLancamentoTitle_idTipoLancamento}" >
                                    <h:outputText value="#{itemCCTL.idTipoLancamento.dsTipoLancamento}" />
                                </p:column>
                                <p:column headerText="Data de Vigência" >
                                    <h:outputText value="#{itemCCTL.dtVigencia}" >
                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="#{bundle.CreateContratoClienteTipoLancamentoTitle_vlAplicacaoTipoLancamento}" >
                                    <h:outputText value="#{itemCCTL.vlAplicacaoTipoLancamento}" />
                                </p:column>
                                <p:column headerText="#{bundle.CreateContratoClienteTipoLancamentoTitle_vlMinimoTipoLancamento}" >
                                    <h:outputText value="#{itemCCTL.vlMinimoTipoLancamento}" />
                                </p:column>
                                <p:column headerText="#{bundle.CreateContratoClienteTipoLancamentoTitle_idEvento}" >
                                    <h:outputText value="#{itemCCTL.idEvento.dsEvento}" />
                                </p:column>
                            </p:dataTable>
                            <br />
                            <p:panelGrid columns="4" rendered="#{contratoClienteController.selected != null}">
                                <p:outputLabel value="#{bundle.CreateContratoClienteTipoLancamentoLabel_idTipoLancamento}" for="idTipoLancamento" />
                                <p:selectOneMenu id="idTipoLancamento" value="#{contratoClienteController.selectedTL.idTipoLancamento}" required="true" requiredMessage="#{bundleNv.EditContratoClienteTipoLancamentoRequiredMessage_idTipoLancamento}" style="width:405px!important;">
                                    <f:selectItems value="#{tipoLancamentoController.itemsAvailableSelectOne}"
                                                   var="idTipoLancamentoItem"
                                                   itemLabel="#{idTipoLancamentoItem.dsTipoLancamento}"
                                                   itemValue="#{idTipoLancamentoItem}"/>
                                </p:selectOneMenu>
                                <p:outputLabel value="Data de Vigência" for="dtVigencia" />
                                <p:calendar id="dtVigencia" locale="pt" pattern="dd/MM/yyyy" mindate="#{contratoClienteController.mostraData()}" value="#{contratoClienteController.selectedTL.dtVigencia}" />
                            </p:panelGrid>
                            <p:panelGrid columns="4" rendered="#{contratoClienteController.selected != null}">
                                <p:outputLabel value="#{bundle.CreateContratoClienteTipoLancamentoLabel_vlAplicacaoTipoLancamento}" for="vlAplicacaoTipoLancamento" />
                                <p:inputText id="vlAplicacaoTipoLancamento" value="#{contratoClienteController.selectedTL.vlAplicacaoTipoLancamento}" title="#{bundleNv.CreateContratoClienteTipoLancamentoTitle_vlAplicacaoTipoLancamento}" style="width:312px!important;"/>
                                <p:outputLabel value="#{bundle.CreateContratoClienteTipoLancamentoLabel_vlMinimoTipoLancamento}" for="vlMinimoTipoLancamento" />
                                <p:inputText id="vlMinimoTipoLancamento" value="#{contratoClienteController.selectedTL.vlMinimoTipoLancamento}" title="#{bundleNv.CreateContratoClienteTipoLancamentoTitle_vlMinimoTipoLancamento}"  style="width:312px!important;"/>
                            </p:panelGrid>
                            <p:panelGrid columns="2" rendered="#{contratoClienteController.selected != null}">
                                <p:outputLabel value="Local do Evento" for="dsLocalEvento" />
                                <p:selectOneMenu id="dsLocalEvento" value="#{contratoClienteController.selectedTL.idBase}" style="width:746px!important;">
                                    <p:ajax listener="#{contratoClienteController.listaEventos()}" update="idEvento" />
                                    <f:selectItems value="#{baseController.itemsAvailableSelectOne}"
                                                   var="idBaseItem"
                                                   itemLabel="#{idBaseItem.dsNomeTeatro}"
                                                   itemValue="#{idBaseItem}" />
                                </p:selectOneMenu>
                                <p:outputLabel value="#{bundle.CreateContratoClienteTipoLancamentoLabel_idEvento}" for="idEvento" />
                                <p:selectOneMenu id="idEvento" value="#{contratoClienteController.selectedTL.idEvento}"  style="width:746px!important;">
                                    <f:selectItem itemLabel="Selecione um Local" />
                                    <f:selectItems value="#{contratoClienteController.listaEventos()}"
                                                   var="idEventoItem"
                                                   itemLabel="#{idEventoItem.dsEvento}"
                                                   itemValue="#{idEventoItem}"/>
                                </p:selectOneMenu>
                                <p:commandButton actionListener="#{contratoClienteController.addEditTL()}" icon="fa fa-check" update="listCCTL" value="Adicionar"/>
                            </p:panelGrid> 
                        </p:tab>
                    </p:tabView><br />
                    <p:commandButton actionListener="#{contratoClienteController.update}" value="#{bundle.Save}" update="display,:ContratoClienteListForm:datalist,:growl" oncomplete="handleSubmit(args, 'ContratoClienteEditDialog');"/>
                    <p:commandButton value="#{bundle.Cancel}" onclick="PF('ContratoClienteEditDialog').hide()"/>
                </h:panelGroup>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
